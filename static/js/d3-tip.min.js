// d3.tip
// Copyright (c) 2013 Justin Palmer
//
// Tooltips for d3.js SVG visualizations
!function(a,b){"function"==typeof define&&define.amd?define(["d3"],b):"object"==typeof module&&module.exports?module.exports=function(a){return a.tip=b(a),a.tip}:a.d3.tip=b(a.d3)}(this,function(a){return function(){function i(a){f=x(a),g=f.createSVGPoint(),document.body.appendChild(e)}function j(){return"n"}function k(){return[0,0]}function l(){return" "}function o(){var a=y();return{top:a.n.y-e.offsetHeight,left:a.n.x-e.offsetWidth/2}}function p(){var a=y();return{top:a.s.y,left:a.s.x-e.offsetWidth/2}}function q(){var a=y();return{top:a.e.y-e.offsetHeight/2,left:a.e.x}}function r(){var a=y();return{top:a.w.y-e.offsetHeight/2,left:a.w.x-e.offsetWidth}}function s(){var a=y();return{top:a.nw.y-e.offsetHeight,left:a.nw.x-e.offsetWidth}}function t(){var a=y();return{top:a.ne.y-e.offsetHeight,left:a.ne.x}}function u(){var a=y();return{top:a.sw.y,left:a.sw.x-e.offsetWidth}}function v(){var a=y();return{top:a.se.y,left:a.e.x}}function w(){var b=a.select(document.createElement("div"));return b.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),b.node()}function x(a){return a=a.node(),"svg"===a.tagName.toLowerCase()?a:a.ownerSVGElement}function y(){for(var b=h||a.event.target;"undefined"==typeof b.getScreenCTM&&"undefined"===b.parentNode;)b=b.parentNode;var c={},d=b.getScreenCTM(),e=b.getBBox(),f=e.width,i=e.height,j=e.x,k=e.y;return g.x=j,g.y=k,c.nw=g.matrixTransform(d),g.x+=f,c.ne=g.matrixTransform(d),g.y+=i,c.se=g.matrixTransform(d),g.x-=f,c.sw=g.matrixTransform(d),g.y-=i/2,c.w=g.matrixTransform(d),g.x+=f,c.e=g.matrixTransform(d),g.x-=f/2,g.y-=i/2,c.n=g.matrixTransform(d),g.y+=i,c.s=g.matrixTransform(d),c}var b=j,c=k,d=l,e=w(),f=null,g=null,h=null;i.show=function(){var f=Array.prototype.slice.call(arguments);f[f.length-1]instanceof SVGElement&&(h=f.pop());var p,g=d.apply(this,f),j=c.apply(this,f),k=b.apply(this,f),l=a.select(e),o=n.length,q=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.scrollLeft||document.body.scrollLeft;for(l.html(g).style({opacity:1,"pointer-events":"all"});o--;)l.classed(n[o],!1);return p=m.get(k).apply(this),l.classed(k,!0).style({top:p.top+j[0]+q+"px",left:p.left+j[1]+r+"px"}),i},i.hide=function(){var b=a.select(e);return b.style({opacity:0,"pointer-events":"none"}),i},i.attr=function(b){if(arguments.length<2&&"string"==typeof b)return a.select(e).attr(b);var d=Array.prototype.slice.call(arguments);return a.selection.prototype.attr.apply(a.select(e),d),i},i.style=function(b){if(arguments.length<2&&"string"==typeof b)return a.select(e).style(b);var d=Array.prototype.slice.call(arguments);return a.selection.prototype.style.apply(a.select(e),d),i},i.direction=function(c){return arguments.length?(b=null==c?c:a.functor(c),i):b},i.offset=function(b){return arguments.length?(c=null==b?b:a.functor(b),i):c},i.html=function(b){return arguments.length?(d=null==b?b:a.functor(b),i):d};var m=a.map({n:o,s:p,e:q,w:r,nw:s,ne:t,sw:u,se:v}),n=m.keys();return i}});